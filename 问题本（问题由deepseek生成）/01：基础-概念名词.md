1. DNS解析的基本过程是什么？

2. 常见的DNS记录类型有哪些？
- A记录：域名→IPv4地址
- AAAA记录：域名→IPv6地址
- CNAME记录：域名别名→真实域名
- MX记录：邮件服务器地址
- TXT记录：文本信息（常用于验证、SPF反垃圾邮件）
- NS记录：指定权威DNS服务器

3. DNS分布式架构的优势是什么？各级服务器的作用？
答案：
优势：避免单点故障、分散查询压力、提高解析速度和全球可用性。
各级服务器作用：
根域名服务器：全球13组，存储顶级域服务器地址，是查询的起点。
顶级域服务器：负责.com, .net, .cn等特定顶级域，存储该域下权威服务器的地址。
权威域名服务器：存储最终域名与IP的映射关系，是域名解析的最终来源。

4. DNS缓存存在于哪些位置？TTL的作用与设置场景？
答案：
缓存位置：浏览器、操作系统、路由器、ISP的DNS服务器。
TTL作用：控制DNS记录在缓存中的存活时间，单位为秒。
设置短TTL的场景：
服务器即将迁移或IP变更时。
实现故障转移和负载均衡，需要快速切换时。
网站处于频繁维护或测试阶段。

5. 常见的DNS攻击与DNSSEC原理？
答案：
常见攻击：
DNS欺骗/缓存投毒：伪造DNS响应，将域名指向恶意IP。
DNS劫持：篡改用户DNS设置或网络流量，导向恶意DNS服务器。
DDoS攻击：通过海量查询请求淹没DNS服务器，使其瘫痪。
DNSSEC原理：通过公钥密码学为DNS数据创建数字签名。递归服务器在收到记录后，会使用对应的公钥验证签名的真实性，从而确保数据在传输过程中未被篡改。

6. 如何从DNS角度排查“网站无法访问”？
答案：
使用nslookup或dig命令：检查域名是否能正常解析出IP。若无法解析，则是DNS问题。
检查解析出的IP是否正确：与预期的服务器IP比对，判断是否被劫持。
更换公共DNS：使用8.8.8.8测试，排除本地ISP的DNS故障。
检查本地Hosts文件：排除本地强制解析。
刷新本地DNS缓存：使用ipconfig /flushdns清除可能错误的缓存。
检查域名状态：通过WHOIS查询域名是否过期或处于Hold状态。

7. 从DNS层面可以采取哪些性能优化措施？
答案：
启用智能DNS/解析：根据用户地理位置、运营商线路返回最优IP，提升访问速度。
使用CDN：结合DNS，将用户请求分发到最近的边缘节点。
设置合理的TTL：平衡缓存命中率和变更灵活性。
DNS预解析：在网页HTML中添加<link rel="dns-prefetch">标签，让浏览器提前解析后续所需域名。

8. 如何通过DNS实现业务迁移的平滑过渡？
答案：
准备期：在迁移前，将域名的TTL值设置为一个较短的时间（如5分钟），让全球缓存尽快过期。
迁移中：新旧两套业务系统同时运行。
切换时：在DNS管理后台，将域名的A记录指向新的服务器IP地址。
观察期：由于之前的短TTL，大部分用户会在几分钟内切换到新IP。在此期间密切监控，如有问题可快速改回旧IP。
稳定后：确认新服务稳定后，将TTL恢复至正常值（如1小时或更长），以减少不必要的查询请求。